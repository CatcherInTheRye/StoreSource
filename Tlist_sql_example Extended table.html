<!DOCTYPE html> 
<html> 
<head> 
	<title>Your Page Title Goes Here</title> 
<!-- Required style sheets: screen.css, and print.css --> 
~[wc:commonscripts]~[wc:JSFunctions]
	<link href="/images/css/screen.css" rel="stylesheet" media="screen"> 
	<link href="/images/css/print.css" rel="stylesheet" media="print"> 



<script ='text/javascript'>


    $j(window).load(function(){

        selectedYear = '~(curtermid)';
        selectedYear = selectedYear.substring(0,2);
        selectedYear = parseInt(selectedYear) + 1990;


        eoyRecords=[
            ~[tlist_sql;
        SELECT
        STUDENTS.LASTFIRST as LASTFIRST,
        STUDENTS.ID as STUDENTID,
        STUDENTS.STUDENT_NUMBER as STUDENT_NUMBER,
        EOY.ID as RECORD_ID,
        EOY.SCHOOL_YEAR as SCHOOL_YEAR,
        EOY.PROMOTED_PLACED as PP,
        EOY.FGL_LA as FGL_LA,
        EOY.FGL_MATH as FGL_MATH
        FROM
        STUDENTS LEFT JOIN
        U_STUDENT_PROFILE_EOY EOY on STUDENTS.ID = EOY.STUDENT_ID AND EOY.SCHOOL_YEAR = (FLOOR(~(curtermid)/100) + 1990)
        WHERE
        STUDENTS.ID IN (4046,4047, 4048, 4049, 4050) 
        ORDER BY LASTFIRST]
        {
            'lastfirst':'~(LASTFIRST;t)',
            'student_id':'~(STUDENT_ID;t)',
            'student_number':'~(STUDENT_NUMBER;t)',
            'record_id':'~(RECORD_ID;t)',
            'school_year':'~(SCHOOL_YEAR;t)',
            'pp':'~(PP;t)',
            'fgl_la':'~(FGL_LA;t)',
            'fgl_math':'~(FGL_MATH;t)'
        },
    [/tlist_sql]
    {
        'lastfirst':'filler',
        'student_id':'filler',
        'student_number':'filler',
        'record_id':'filler',
        'school_year':'filler',
        'pp':'filler',
        'fgl_la':'filler',
        'fgl_math':'filler'}];

    var newId = 0;

    $j.each(eoyRecords,function(index,value){
        if(value.record_id !== 'filler'){
            if(value.record_id == '')
            {
                newId = newId - 1;
            }        

            $j("#recordsTable").append('<tr>' + 
                '<td>' + 
                    '<input type="hidden" value="' + value.student_id + 
                    '" name="CF-[:0.U_STUDENT_PROFILE.U_STUDENT_PROFILE_EOY:' + (value.record_id == ""?newId:value.record_id) + 
                    ']student_id$format=text"/>' + 
                    '<input type="hidden" value="' + value.student_number + 
                    '" name="CF-[:0.U_STUDENT_PROFILE.U_STUDENT_PROFILE_EOY:' + (value.record_id == ""?newId:value.record_id) + 
                    ']student_number$format=text"/>' + 
                    '<input type="hidden" value="' + selectedYear + 
                    '" name="CF-[:0.U_STUDENT_PROFILE.U_STUDENT_PROFILE_EOY:' + (value.record_id == ""?newId:value.record_id) + 
                    ']school_year$format=text"/>' + 
                value.lastfirst + 
                '</td>' + 
                '<td>' + 
                    '<select name="CF-[:0.U_STUDENT_PROFILE.U_STUDENT_PROFILE_EOY:' + (value.record_id == ""?newId:value.record_id) + 
                    ']promoted_placed$format=text">' +
                        '<option value="" ' + (value.pp == ''?'selected':'') + '></option>' + 
                        '<option value="0" ' + (value.pp == '0'?'selected':'') + '>Promoted</option>' + 
                        '<option value="1" ' + (value.pp == '1'?'selected':'') + '>Placed</option>' + 
                    '</select></td>' +
                '<td>' + 
                    '<select name="CF-[:0.U_STUDENT_PROFILE.U_STUDENT_PROFILE_EOY:' + (value.record_id == ""?newId:value.record_id) + 
                    ']fgl_la$format=text">' +
                        '<option value="" ' + (value.fgl_la == ''?'selected':'') + '></option>' + 
                        '<option value="0" ' + (value.fgl_la== '0'?'selected':'') + '>ECS</option>' + 
                        '<option value="1" ' + (value.fgl_la== '1'?'selected':'') + '>Grade 1</option>' + 
                        '<option value="2" ' + (value.fgl_la== '2'?'selected':'') + '>Grade 2</option>' + 
                        '<option value="3" ' + (value.fgl_la== '3'?'selected':'') + '>Grade 3</option>' + 
                        '<option value="4" ' + (value.fgl_la== '4'?'selected':'') + '>Grade 4</option>' + 
                        '<option value="5" ' + (value.fgl_la== '5'?'selected':'') + '>Grade 5</option>' + 
                        '<option value="6" ' + (value.fgl_la== '6'?'selected':'') + '>Grade 6</option>' + 
                        '<option value="7" ' + (value.fgl_la== '7'?'selected':'') + '>Grade 7</option>' + 
                        '<option value="8" ' + (value.fgl_la== '8'?'selected':'') + '>Grade 8</option>' + 
                        '<option value="9" ' + (value.fgl_la== '9'?'selected':'') + '>Grade 9</option>' + 
                        '<option value="10" ' + (value.fgl_la== '10'?'selected':'') + '>Grade 10</option>' + 
                        '<option value="11" ' + (value.fgl_la== '11'?'selected':'') + '>Grade 11</option>' + 
                        '<option value="12" ' + (value.fgl_la== '12'?'selected':'') + '>Grade 12</option>' + 
                    '</select></td>' +
                 '<td>' + 
                    '<select name="CF-[:0.U_STUDENT_PROFILE.U_STUDENT_PROFILE_EOY:' + (value.record_id == ""?newId:value.record_id) + 
                    ']fgl_math$format=text">' +
                        '<option value="" ' + (value.fgl_math== ''?'selected':'') + '></option>' + 
                        '<option value="0" ' + (value.fgl_math== '0'?'selected':'') + '>ECS</option>' + 
                        '<option value="1" ' + (value.fgl_math== '1'?'selected':'') + '>Grade 1</option>' + 
                        '<option value="2" ' + (value.fgl_math== '2'?'selected':'') + '>Grade 2</option>' + 
                        '<option value="3" ' + (value.fgl_math== '3'?'selected':'') + '>Grade 3</option>' + 
                        '<option value="4" ' + (value.fgl_math== '4'?'selected':'') + '>Grade 4</option>' + 
                        '<option value="5" ' + (value.fgl_math== '5'?'selected':'') + '>Grade 5</option>' + 
                        '<option value="6" ' + (value.fgl_math== '6'?'selected':'') + '>Grade 6</option>' + 
                        '<option value="7" ' + (value.fgl_math== '7'?'selected':'') + '>Grade 7</option>' + 
                        '<option value="8" ' + (value.fgl_math== '8'?'selected':'') + '>Grade 8</option>' + 
                        '<option value="9" ' + (value.fgl_math== '9'?'selected':'') + '>Grade 9</option>' + 
                        '<option value="10" ' + (value.fgl_math== '10'?'selected':'') + '>Grade 10</option>' + 
                        '<option value="11" ' + (value.fgl_math== '11'?'selected':'') + '>Grade 11</option>' + 
                        '<option value="12" ' + (value.fgl_math== '12'?'selected':'') + '>Grade 12</option>' + 
                    '</select></td>' +
                '</tr>');


        }
    });
    });
</script>




</head> 
<body> 
	~[wc:admin_header_css] 
    <div id="breadcrumbs"> 
		<!-- breadcrumb start -->Your breadcrumbs go here<!-- breadcrumb end --> 
    </div> 
<!-- start of main menu and content --> 
	~[wc:admin_navigation_css] 

<form action="/admin/changesrecorded.white.html" method="POST">

<!-- Start of Page --> 
	<h1>PowerSchool Independant table code</h1> 
<!-- start of content area --> 
	<div class="box-round"> 
<!--	 
~[tlist_standalone:U_STUDENT_PROFILE.U_STUDENT_PROFILE_EOY;displaycols:student_id, student_number, school_year, promoted_placed, fgl_la, fgl_math;fieldNames:Student ID, Student Number, School Year, Promoted/Placed, FGL LA, FGL MATH;type:html]
-->

<h1>Custom TList + jquery</h1>

 
<table id='recordsTable' class="linkDescList">
          

</table>


<div class="button-row"><input type="hidden" name="ac" value="prim">~[submitbutton]</div>
</div>
	</div> 
<!-- end of content area --> 
</form>
	~[wc:admin_footer_css] 
<!-- required scripts --> 
	~[wc:commonscripts] 
</body> 
</html>